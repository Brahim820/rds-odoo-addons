<?xml version="1.0" encoding="utf-8"?>
<odoo>
<data noupdate="0">

    <template id="login" name="Frontend Timesheet Login">
        <head>
            <title>Frontend Timesheet</title>
            <t t-call-assets="web.assets_common" t-js="false"/>
            <t t-call-assets="web.assets_frontend" t-js="false"/>
            <t t-call-assets="web.assets_common" t-css="false"/>
            <t t-call-assets="web.assets_frontend" t-css="false"/>
            <link rel="stylesheet" href="/frontend_project_timesheet/static/web/login.css" type="text/css"/>
        </head>
        <body>
            <div class="login_outer_wrapper">
                <div class="login_wrapper material-1">
                    <h1>Welcome!</h1>
                    <strong><h2>Scan your badge to start.</h2></strong>
                    <input type="text" id="badgeid" name="badgeid" required="required"
                    minlength="4" maxlength="10"
                    placeholder="Scan Badge..." onkeyup="listen_barcode(this.value);"/>
                    
                    <div class="alertcard alert" style="opacity:0"/>
                </div>
            </div>
        </body>
        
        <script type="text/javascript" src="/frontend_project_timesheet/static/web/login.js"/>
    </template>

    <template id="home" name="Frontend Timesheet Home">
        <head>
            <title>Frontend Timesheet</title>
            <t t-call-assets="web.assets_common" t-js="false"/>
            <t t-call-assets="web.assets_frontend" t-js="false"/>
            <t t-call-assets="web.assets_common" t-css="false"/>
            <t t-call-assets="web.assets_frontend" t-css="false"/>
            <link rel="stylesheet" href="/frontend_project_timesheet/static/web/style.css" type="text/css"/>
        </head>
        <body>
            <div class="employee_shield material-2">
                <span class="employee_img" t-attf-style="background-image:url(data:image/png;base64,#{employee.image})"/><span class="employee_name" t-esc="employee.name"/>
                <span class="quit fa fa-undo" onclick="quit()"/>
            </div>

            <div class="main_wrapper">
                <t t-foreach="tasks" t-as="task">
                    <div 
                        t-attf-class="task material-1 #{'status_' + ('working' if task.work_start else task.kanban_state)}" 
                        t-att-data-status="'working' if task.work_start else task.kanban_state"
                        t-att-data-id="task.id"
                    >
                        <div class="task_cover_image" t-if="task.displayed_image_id" t-attf-onclick="$('#modal-#{task.id}').modal(true, true, true, true)" t-attf-style="background-image:url(data:image/png;base64,#{task.displayed_image_id.datas})"/>
                        <div class="taskinfo">
                            <div class="task_basic">
                                <div class="task_name" t-esc="task.name"/>
                                <div class="task_project" t-esc="task.project_id.name"/>
                            </div>
                            <div class="task_details">
                                <div t-attf-class="tasklabel startclock #{'working' if task.work_start else 'not_working'}">Lavoro iniziato a:</div><div class="taskvalue startclock  #{'working' if task.work_start else ''}"><span t-if="task.work_start" t-field="task.work_start"/></div>
                                <div class="tasklabel">Ore Lavorate:</div><div class="taskvalue workedhours"><span t-field="task.total_hours_spent" t-field-options="{'widget': 'float_time'}"/></div>
                                <div class="tasklabel">Scadenza:</div><div class="taskvalue deadline"><span t-field="task.date_deadline" t-field-options="{'widget': 'date'}"/></div>
                            </div>
                            <div onclick="addFocus(this)" class="task_description material-3">
                                <t t-raw="task.description"/>
                            </div>
                        </div>
                        <div class="btn_container">
                            <div class="taskbtn_small fa fa-warning" onclick="block(this)"/>
                            <div class="taskbtn_small fa fa-check" onclick="done(this)"/>
                            <div t-attf-class="taskbtn_large fa #{'fa-pause' if task.work_start else 'fa-play'}" onclick="startWork(this)"/>
                        </div>
                    </div>

                    <div class="modal fade" t-attf-id="modal-#{task.id}" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
                        <div class="modal-dialog modal-dialog-centered" role="document">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="exampleModalLongTitle"><span t-esc="task.name"/> Documents</h5>
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true"></span>
                                    </button>
                                </div>
                                <div class="modal-body">
                                    <img t-attf-src="data:image/png;base64,#{task.displayed_image_id.datas}"/>
                                </div>
                            </div>
                        </div>
                    </div>
                </t>
            </div>
            <div class="alertcard alert alert-warning" style="opacity:0"/>
            <script type="text/javascript" src="/frontend_project_timesheet/static/web/home.js"/>
        </body>
    </template>

</data>
</odoo>

