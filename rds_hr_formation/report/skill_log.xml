<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <report 
        id="action_report_skill_log"
        string="Giornale di Apprendimento"
        model="hr.employee" 
        report_type="qweb-pdf"
        file="rds_hr_formation.rds_report_skill_log" 
        name="rds_hr_formation.rds_report_skill_log"
        print_report_name="('Giornale di Apprendimento - %s' % (object.name))"
    />

    <template id="rds_report_skill_log">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="employee">
                <t t-call="web.external_layout">
                    <div class="page">
                        <div class="oe_structure"/>

                        <div class="row lj_intestation">
                            <div name="type" class="lj_title col-xs-8">
                                <h1>Giornale di Apprendimento</h1>
                                <h3 t-field="employee.name"/>
                            </div>
                            <div name="employee-photo" style="text-align: right" class="col-xs-4">
                                <img t-att-src="'data:image/png;base64,%s' % to_text(employee.image)" class="emp-photo" alt="Employee Image"/>
                            </div>
                        </div>

                        <table class="table table-condensed table-employee-skill-log">    
                            <col width="8%"/><col/><col/><col/><col/>
                            <thead class="thead_payroll">
                                <tr>
                                    <th>Data</th>
                                    <th>Abilit√†</th>
                                    <th>Tipo</th>
                                    <th>Livello</th>
                                    <th>Note</th>
                                </tr>
                            </thead>
                            <tbody class="tbody_payroll">
                                <t t-foreach="employee.skill_logs" t-as="log">
                                    <tr t-attf-class="employee_skill_row_#{log.log_type}">
                                        <td>
                                            <div class="cell_wrapper">
                                                <span><t t-esc="log.date"/></span>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="cell_wrapper">
                                                <span><t t-esc="log.skill_type.complete_name"/></span>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="cell_wrapper">
                                                <span t-field="log.log_type"/>
                                            </div>
                                        </td>                    
                                        <td>
                                            <div class="cell_wrapper">
                                                <span><t t-esc="log.level"/></span><span style="margin-left: 15px" t-if="log.increment != 0">(<t t-if="log.increment > 0" t-esc="'+'"/><t t-esc="log.increment"/>)</span>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="cell_wrapper">
                                                <span><t t-esc="log.notes"/></span>
                                            </div>
                                        </td>
                                    </tr>
                                </t>
                            </tbody>
                        </table>

                        <div class="clearfix">
                        </div>

                        <div class="oe_structure"/>
                    </div>
                </t>
            </t>
        </t>
    </template>

    <template id="report_assets_common" name="rds_formation assets" inherit_id="web.report_assets_common">
        <xpath expr="." position="inside">
            <link rel='stylesheet' href="/rds_hr_formation/static/report/css/formation.css"/>
        </xpath>
    </template>

</odoo>
