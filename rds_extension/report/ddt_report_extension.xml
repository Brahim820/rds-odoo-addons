<?xml version="1.0" encoding="utf-8"?>
<odoo>
     <template id="me_stock_picking_ddt_pdf" inherit_id="omnia_ddt.stock_picking_ddt_pdf"> 
            <xpath expr="//div[@class='page']" position="replace">
                <div align="center">
                    <div class="div_hr" style="margin-bottom:15px;"></div>
                    <div id="rds_header" class="rds_header">
                        <div class="rds_header_left">
                            <table class="table_ddt" style="display:inline-table">
                                <thead>
                                    <tr>
                                        <th class="th_ddt">DOCUMENTO DI TRASPORTO</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td class="td_ddt">Number: <b><t t-esc="o.ddt_number"/></b> Date: <b><spam t-esc="o.ddt_date" t-field-options='{"format": "dd/MM/yyyy"}'/></b></td>
                                    </tr>
                                </tbody>
                            </table>
                            <table class="table_ddt" style="display:inline-table; margin-left: 15px;">
                                <thead>
                                    <tr>
                                        <th class="th_ddt">CAUSALE</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td class="td_ddt"><spam t-esc="o.transportation_reason_id.name"/></td>
                                    </tr>
                                </tbody>
                            </table>
                            <div class="div_hr" style="margin-bottom:5px;margin-top:5px;"></div>
                            <table class="table_ddt">
                                <thead>
                                    <tr>
                                        <th class="th_ddt">Trasporto a cura del</th>
                                        <th class="th_ddt"></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td class="td_ddt"> <div t-esc="o.ddt_reason"/> </td>
                                        <td class="td_ddt"></td>
                                    </tr>
                                </tbody>
                            </table>
                            <div class="div_hr" style="margin-bottom:5px;margin-top:5px;"></div>
                            <table class="table_ddt">
                                <tbody>
                                        <tr><td class="td_ddt"><b>Resa:</b></td></tr>
                                        <tr><td class="td_ddt"><div t-esc="o.carriage_condition_id.name"/></td></tr>
                                </tbody>
                            </table>
                        </div>
                        <!-- Right side -->
                        <div class="rds_header_right">
                            <table class="table_ddt">
                                <thead>
                                    <tr>
                                        <th class="th_ddt">Destinatario</th>
                                        <th class="th_ddt"></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td class="td_ddt"> 
                                            <b><div t-esc="o.main_partner_id.name"/></b>
                                            <div >
                                                <div t-esc="o.main_partner_id.street"/>
                                                <span t-esc="o.main_partner_id.street2"/>
                                                <span t-esc="o.main_partner_id.zip"/>
                                                <div t-esc="o.main_partner_id.city"/>
                                                <span t-esc="o.main_partner_id.state_id.name"/>
                                                <span>
                                                    <t t-if="o.main_partner_id.country_id.code">
                                                        <span t-esc="o.main_partner_id.country_id.code"/>
                                                    </t>
                                                </span>
                                            </div>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                            <table class="table_ddt" style = 'margin-top:10px;'>
                                <thead>
                                    <tr>
                                        <th class="th_ddt">Luogo di destinazione</th>
                                        <th class="th_ddt"></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr t-if="not o.delivery_address">
                                        <td class="td_ddt"> 
                                            <b><div t-esc="o.partner_id.name"/></b>
                                            <div >
                                                <div t-esc="o.partner_id.street"/>
                                                <span t-esc="o.partner_id.street2"/>
                                                <span t-esc="o.partner_id.zip"/>
                                                <div t-esc="o.partner_id.city"/>
                                                <span t-esc="o.partner_id.state_id.name"/>
                                                <span>
                                                    <t t-if="o.partner_id.country_id.code">
                                                        <span t-esc="o.partner_id.country_id.code"/>
                                                    </t>
                                                </span>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr t-if="o.delivery_address">
                                        <td class="td_ddt"> 
                                            <b><div t-esc="o.delivery_address.name"/></b>
                                            <div>
                                                <div t-esc="o.delivery_address.street"/>
                                                <span t-esc="o.delivery_address.street2"/>
                                                <span t-esc="o.delivery_address.zip"/>
                                                <div t-esc="o.delivery_address.city"/>
                                                <span t-esc="o.delivery_address.state_id.name"/>
                                                <span>
                                                    <t t-if="o.delivery_address.country_id.code">
                                                        <span t-esc="o.delivery_address.country_id.code"/>
                                                    </t>
                                                </span>
                                            </div>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <div class="div_hr" style="margin-bottom:5px;margin-top:5px;"></div>
                        <div><b>Annotazioni</b></div>
                        <div><div t-esc="o.note_ddt"/></div>
                        <div class="div_hr" style="margin-bottom:20px;margin-top:10px;"></div>
                        <t t-set="detailedDict" t-value="o.getDDTLines()"/>
                        <table class="table_ddt table_rds">
                            <colgroup>
                                <col width="10%"/>
                                <col width="10%"/>
                                <col width="55%"/>
                                <col width="10%"/>    
                                <col width="15%"/> 
                            </colgroup>
                            <thead>
                                <tr>
                                    <th class="th_ddt th_title">RIGA</th>
                                    <th class="th_ddt th_title">ARTICOLO</th>
                                    <th class="th_ddt th_title">DESCRIZIONE</th>
                                    <th class="th_ddt th_title">UM</th>
                                    <th class="th_ddt th_title">QUANTITA'</th>
                                </tr>
                            </thead>
                            <tbody>
                                <t t-set="line_counter" t-value="1"/>
                                <t t-foreach="detailedDict" t-as="singleDictItem">
                                    <tr>
                                        <td colspan="3"  class="td_ddt" style="padding-bottom:15px;padding-top:15px;"><b><t t-esc="singleDictItem.name"/></b></td>
                                    </tr>
                                    
                                    <t t-foreach="singleDictItem_value" t-as="lineBrws">
                                        <t t-if="lineBrws.quantity_done &gt; 0">
                                            <tr>
                                                <td colspan="5" class="td_ddt align_left th_title2">
                                                    <t t-esc="lineBrws.getSaleLineMsg()"/>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td class="td_ddt align_left th_title2"> <div t-esc="line_counter"/> </td>
                                                <td class="td_ddt align_left th_title2">
                                                    <div t-esc="lineBrws.product_id.default_code"/>
                                                    <div t-esc="lineBrws.product_id.get_customer_ref(o.main_partner_id)"/>
                                                </td>
                                                <td class="td_ddt align_left th_title2"> <div t-esc="lineBrws.name"/> </td>
                                                <td class="td_ddt align_center th_title2"> <div t-esc="lineBrws.product_uom.name"/> </td>
                                                <td class="td_ddt align_center th_title2"> <div t-esc="lineBrws.quantity_done"/> </td>
                                            </tr>
                                            <t t-set="line_total" t-value="lineBrws.getRawTotalPlusWastage()"/>
                                            <t t-if="line_total != None">
    	                                        <tr>
    	                                            <td class="td_ddt align_left th_title2"></td>
    	                                            <td class="td_ddt align_left th_title2"></td>
    	                                            <td class="td_ddt align_left th_title2"> Peso Mat. stampato Alluminio di Vs proprietà compreso calo</td>
    	                                            <td class="td_ddt align_center th_title2"> KG </td>
    	                                            <td class="td_ddt align_center th_title2"> <div t-esc="line_total"/> </td>
    	                                        </tr>
                                            </t>
                                            <t t-set="line_counter" t-value="line_counter+1"/>
                                        </t>
                                    </t>
                                </t>
                            </tbody>
                        </table> 
                    </div>
                    <div class="div_hr" style="margin-top:20px;margin-bottom:20px;"></div>
                    <div id="footer">
                        <table class="table_ddt table_rds">
                                <thead>
                                    <tr>
                                        <th class="th_ddt th_title2 little_font_size">Nome e domicilio del vettore</th>
                                        <th class="th_ddt th_title2 little_font_size">Firma Conducente</th>
                                        <th class="th_ddt th_title2 little_font_size">Firma Destinatario</th>
                                        <th class="th_ddt th_title2 little_font_size">Data/ora ritiro</th>
                                        <th class="th_ddt th_title2 little_font_size">Asp. Esteriore Beni</th>
                                        <th class="th_ddt th_title2 little_font_size">Colli</th>
                                        <th class="th_ddt th_title2 little_font_size">Peso Lordo Kg</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td class="td_ddt th_title2 little_font_size"> <div t-esc="o.carrier_id.name"/> </td>
                                        <td class="td_ddt th_title2 little_font_size"> </td>
                                        <td class="td_ddt th_title2 little_font_size">  </td>
                                        <td class="td_ddt th_title2 little_font_size"> 
                                        	<!-- <div t-esc="o.scheduled_date"  t-field-options='{"format": "dd/MM/yyyy"}'/> -->
                                        	<div t-esc="time.strftime('%d/%m/%Y',time.strptime(o.scheduled_date,'%Y-%m-%d %H:%M:%S'))"/>
                                        </td>
                                        <td class="td_ddt th_title2 little_font_size"> <div t-esc="o.goods_description_id.name"/> </td>
                                        <td class="td_ddt th_title2 little_font_size"> <div t-esc="o.number_of_packages"/> </td>
                                        <td class="td_ddt th_title2 little_font_size"> <div t-esc="o.weight_ddt"/> </td>
                                    </tr>
                                </tbody>
                        </table>
                        <div class="div_hr" style="margin-top:5px;margin-bottom:5px;"></div>
                    </div>
                </div>
            </xpath>
    </template>
</odoo>